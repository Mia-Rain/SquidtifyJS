<!DOCTYPE html> 
<html lang="en"> 
<head> 
<title>SquidtifyJS</title> 
<!-- Load FontAwesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
<link rel="icon" href="https://cdn.discordapp.com/attachments/723802289948721162/762584657744887828/SpuidtifyJS_ex1_invert.png">
</head>
<body>
<a>
	<div class="wp-switcher" style="display: flex;flex-direction: row;align-items: center;">
    		<div id="switch-left" onclick="wpLeft();">
        		<i class="fas fa-angle-left fa-2x"></i>
    		</div>
		<div id="reset-switcher" onclick="wpReset();">
        		<i class="fas fa-times-circle fa-1x"></i>    
    		</div>
    		<div id="switch-right" onclick="wpRight();">
       			<i class="fas fa-angle-right fa-2x"></i>
    		</div>
		<div onclick="li();">
  			<i class="fas fa-info-circle fa-1x"></i>
		</div>
	</div>
</a>
<div class="player"> 
	<!-- Define the section for displaying details -->
	<div class="details"> 
	<div id="track-art" class="track-art"></div>
	<div id="track-name" class="track-name"></div> 
	<div id="track-artist" class="track-artist"></div> 
	</div> 

	<!-- Define the section for displaying track buttons -->
	<div class="buttons"> 
	<div class="shuffle" onclick="shuffle()">
        	<i id="shuffle" class="fa fa-random fa-2x" style="cursor: pointer;"></i>
	</div>
	<div class="prev-track" onclick="prevTrack()"> 
		<i class="fa fa-step-backward fa-2x"></i> 
	</div> 
	<div id="playback" class="playpause-track" onclick="pauseplay()"> 
		<i id="playbutton" class="fa fa-pause-circle fa-5x"></i> 
	</div> 
	<div class="next-track" onclick="nextTrack()"> 
		<i class="fa fa-step-forward fa-2x"></i> 
	</div> 
	<div class="container_row" id="loop" onclick="repeat()" style="cursor: pointer; margin-top: 6.5px;">
  		<i class="fa layer1 fa-sync-alt fa-2x"></i>
  		<i id="track" class="fa layer2 fa-1x fa-circle"></i>
	</div>
	</div> 

	<!-- Define the section for displaying the seek slider-->
	<div class="slider_container"> 
	<div class="current-time"></div> 
	<input type="range" min="1" max="100"
		value="0" class="seek_slider" onchange="seekTo()"> 
	<div id="durr" class="total-duration"></div> 
	</div>

	<!-- Define the section for displaying the volume slider-->
	<div class="slider_container"> 
	<i class="fa fa-volume-down"></i> 
	<input type="range" min="1" max="100"
		value="99" class="volume_slider" onchange="setVolume()"> 
	<i class="fa fa-volume-up"></i> 
	</div> 
</div> 
<div id="li" style="display: block;">
    <span>
  These lovely backgrounds are provided <a href="//github.com/ThatGeekyWeeb/Squid-Dots/blob/master/wallpapers/COPYING">100% without copyright</a><br>
                      Free of use!<br>
         By: ThatGeekyWeeb<br>
    
    </span>
</div>
</body> 
</html> 
<style>
#li {
    width: 70vw;
    height: 70vh;
    background: #C4B9B9;
    display: none;
    margin: auto;
    padding: 70px;
    text-align: center;
    line-height: 3vh;
    display: table !important;
}
#li span {
    vertical-align: middle;
    line-height: normal;
    display: table-cell;
}
body { 
background: radial-gradient(circle, rgba(177,173,246,1) 0%, rgba(181,140,223,1) 25%, rgba(248,151,255,1) 75%, rgba(255,187,215,1) 100%);
transition: background-color .5s; 
}

/* Using flex with the column direction to 
align items in a vertical direction */
.player { 
height: 95vh; 
display: flex; 
align-items: center; 
flex-direction: column; 
justify-content: center; 
} 

.details { 
display: flex; 
align-items: center; 
flex-direction: column; 
justify-content: center; 
margin-top: 25px; 
} 

.track-art { 
margin: 25px; 
height: 250px; 
width: 250px; 
background-size: cover; 
background-position: center; 
border-radius: 10px; 
} 

/* Changing the font sizes to suitable ones */
.now-playing { 
font-size: 1rem; 
} 

.track-name { 
font-size: 3rem; 
} 

.track-artist { 
font-size: 1.5rem; 
} 

/* Using flex with the row direction to 
align items in a horizontal direction */
.buttons { 
display: flex; 
flex-direction: row; 
align-items: center; 
margin-right: 30px;
} 

.playpause-track, 
.prev-track, 
.next-track { 
padding: 25px; 
opacity: 0.8; 

/* Smoothly transition the opacity */
transition: opacity .2s; 
} 

/* Change the opacity when mouse is hovered */
.playpause-track:hover, 
.prev-track:hover, 
.next-track:hover { 
opacity: 1.0; 
} 

/* Define the slider width so that it scales properly */
.slider_container { 
width: 100%; 
max-width: 900px; 
display: flex; 
justify-content: center; 
align-items: center; 
} 

/* Modify the appearance of the slider */
.seek_slider, .volume_slider { 
-webkit-appearance: none; 
-moz-appearance: none; 
appearance: none; 
height: 5px; 
background: black; 
opacity: 0.7; 
-webkit-transition: .2s; 
transition: opacity .2s; 
} 
  

/* Modify the appearance of the slider thumb */
.seek_slider::-webkit-slider-thumb, 
.volume_slider::-webkit-slider-thumb { 
-webkit-appearance: none; 
-moz-appearance: none; 
appearance: none; 
width: 15px; 
height: 15px; 
background: white; 
cursor: pointer; 
border-radius: 50%; 
} 

/* Change the opacity when mouse is hovered */
.seek_slider:hover, 
.volume_slider:hover { 
opacity: 1.0; 
} 

input[type="range"].seek_slider {
    width: 90000000px;
}

.volume_slider { 
width: 30%; 
} 

.current-time, 
.total-duration { 
padding: 10px; 
} 

i.fa-volume-down, 
i.fa-volume-up { 
padding: 10px; 
} 

[class*="fa"] {
    cursor: pointer;
}
/* 
 This code is better then the old one, and applies to all buttons
 I can use !important's if I need to override it
*/
.container_row {
    height: 50px;
    margin: 0;
    position: relative;
}

.layer1 {
    position: absolute;
    z-index: 1;
    left: 0;
    top: 0;
    height: 50px;
    transform: scale(-1, 1);
    margin-top: 5px;
}

.layer2 {
    position: absolute;
    z-index: 2;
    left: 0;
    top: 0;
    height: 50px;
    margin-left: 15px;
    transform: scale(0.9);
}
.fa-sync-alt {
   transform: scale(-1, 1);
}
div#reset-switcher {
    display: none;
}

a:hover div#reset-switcher, a:hover div#li {
    display: block;
}
// Above hides the reset button, unless the user is using the wp-switcher
</style>
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script>
var urlParams = new URLSearchParams(window.location.search);
console.log(urlParams.get('code'));
var code = urlParams.get('code');
const CLID = sessionStorage.getItem('CLID');
const CLSEC = sessionStorage.getItem('CLSEC');
function millisToMinutesAndSeconds(millis) {
  var minutes = Math.floor(millis / 60000);
  var seconds = ((millis % 60000) / 1000).toFixed(0);
  return minutes + ":" + (seconds < 10 ? '0' : '') + seconds;
}
$.ajax({
            type: 'POST',
            url: "https://accounts.spotify.com/api/token",
            headers: {'Content-Type': 'application/x-www-form-urlencoded'},
            contentType: 'application/x-www-form-urlencoded; charset=utf-8',
            dataType: 'json',
            data: { 'client_id': CLID, 'client_secret': CLSEC, 'redirect_uri': 'https://www.thatgeekyweeb.is-dummy-thi.cc/SquidtifyJS/callback/', code, 'grant_type': "authorization_code" },
            success: function (response, data) {
                	console.log(response);
			console.log(data);
                	sessionStorage.setItem('refresh_token', response.refresh_token);
	    },
	    error: function () {
		    window.location.replace('https://www.thatgeekyweeb.is-dummy-thi.cc/SquidtifyJS/');
	    }
});
window.refresh_token = sessionStorage.getItem('refresh_token');
function auth(){
	$.ajax({
  	      type: 'POST',
    	      url: 'https://accounts.spotify.com/api/token',
      	      contentType: 'application/x-www-form-urlencoded',
              data: { 'client_id': sessionStorage.getItem('CLID'), 'client_secret': sessionStorage.getItem('CLSEC'), 'grant_type': 'refresh_token', 'refresh_token': window.refresh_token },
      	      success: function (response, data) {
			sessionStorage.setItem('access_token', response.access_token);
    	      }
	});
	window.access_token = sessionStorage.getItem('access_token');
}
function auth(){
	$.ajax({
  	      type: 'POST',
    	      url: 'https://accounts.spotify.com/api/token',
      	      contentType: 'application/x-www-form-urlencoded',
              data: { 'client_id': CLID, 'client_secret': CLSEC, 'grant_type': 'refresh_token', 'refresh_token': window.refresh_token },
      	      success: function (response, data) {
			sessionStorage.setItem('access_token', response.access_token);
    	      }
	});
	window.access_token = sessionStorage.getItem('access_token');
}
auth();
window.history.replaceState(null, null, window.location.pathname); // Emptys the URL params since there ugly
document.getElementById('li').style.setProperty('display', 'none', 'important'); // Force hide 'li'
// WP-SWITCHER 
wps = ["https://github.com/ThatGeekyWeeb/Squid-Dots/raw/master/wallpapers/shift.png","https://github.com/ThatGeekyWeeb/Squid-Dots/raw/master/wallpapers/spin.png","https://github.com/ThatGeekyWeeb/Squid-Dots/raw/master/wallpapers/water.png","https://github.com/ThatGeekyWeeb/Squid-Dots/raw/master/wallpapers/the-blood-is-there.png","https://github.com/ThatGeekyWeeb/Squid-Dots/raw/master/wallpapers/im-crying.png","https://github.com/ThatGeekyWeeb/Squid-Dots/raw/master/wallpapers/blended.png","https://github.com/ThatGeekyWeeb/Squid-Dots/raw/master/wallpapers/clouds.png"];	
sessionStorage.setItem('num', 0);
function wpRight() {
    if ( sessionStorage.getItem('num') === null) {
        sessionStorage.setItem('num', 0);
    } else if (parseInt(sessionStorage.getItem('num')) > (wps.length - 1)) {
    	sessionStorage.setItem('num',0);
    } else if (parseInt(sessionStorage.getItem('num')) + 1 == (wps.length)) {
    	document.body.style.background = null;
	sessionStorage.setItem('num', 0);
    } else {
        sessionStorage.setItem('num',parseInt(sessionStorage.getItem('num')) + 1);
    }
    document.body.style.background = 'url(' + wps[parseInt(sessionStorage.getItem('num'))] + ')';
}
function wpLeft() {
var num;
    if ( sessionStorage.getItem('num') === null) {
        sessionStorage.setItem('num', 0);
    } else if (parseInt(sessionStorage.getItem('num')) == 0 || (sessionStorage.getItem('num') == "NaN")) {
	document.body.style.background = null;
	sessionStorage.setItem('num', wps.length - 1);
    } else if ( parseInt(sessionStorage.getItem('num')) > 0 ) {
        sessionStorage.setItem('num',parseInt(sessionStorage.getItem('num')) - 1);
        console.log('less');
    } else {
	 sessionStorage.setItem('num', wps.length - 1);
    console.log('last');
    }
    document.body.style.background = 'url(' + wps[parseInt(sessionStorage.getItem('num'))] + ')';
}
function wpReset() {document.body.style.background = null; sessionStorage.setItem('num', 0);}
function li() {
    if (document.querySelectorAll("[class=player]")[0].style.display  == 'none') {document.querySelectorAll("[class=player]")[0].style.display = null;} else {document.querySelectorAll("[class=player]")[0].style.display = 'none';}
    if (document.getElementById('li').style.display == 'none') {document.getElementById('li').style.display = null;} else {document.getElementById('li').style.setProperty('display', 'none', 'important');}
} // licensing
//
console.stdlog = console.log.bind(console);
console.logs = [];
console.log = function(){
    console.logs.push(Array.from(arguments));
    console.stdlog.apply(console, arguments);
}
	
function device_get() {
auth();
$.ajax({
	    type: 'GET',
	    url: "https://api.spotify.com/v1/me/player/devices", 
            contentType: 'application/x-www-form-urlencoded',
            Accept: 'application/json',
            data: { 'access_token': window.access_token },
            success: function (response, data) {
		if (response.devices[0] === null || response.devices[0] === undefined) {
	       		sessionStorage.setItem('device', null);
			console.log('No device!!!');
	       	} else {
               		sessionStorage.setItem('device', response.devices[0].id);
	       		console.log(response.devices[0].id);
	    	}
            }
})
window.device = sessionStorage.getItem('device');
}
function pause() {
device_get();
$.ajax({
	    type: 'PUT',
	    url: "https://api.spotify.com/v1/me/player/pause",
            data: { device_id: window.device },
            headers: {
           	 Authorization: 'Bearer ' + window.access_token,
           	 'Accept': 'application/json',
            	'Content-Type': 'application/json'
            },
            success: function () {
            		console.log('Paused');
            }
})
}
function resume(){
device_get();
$.ajax({
	    type: 'PUT',
	    url: "https://api.spotify.com/v1/me/player/play",
            data: {},
            headers: {
            	Authorization: 'Bearer ' + window.access_token,
            	'Accept': 'application/json',
            	'Content-Type': 'application/json'
            },
            success: function () {
            		console.log('Resumed');
            }
})
}
function seekTo() {
console.log('seeking');
seek = Math.floor(sessionStorage.getItem('durr') * (document.querySelector(".seek_slider").value / 100));
console.log(seek);
$.ajax({
  type: 'PUT',
  url: 'https://api.spotify.com/v1/me/player/seek?position_ms=' + seek,
  headers: {
  	Authorization: 'Bearer ' + window.access_token,
  },
  success: function (response, data) {console.log(response);}
})
}
function pauseplay() {
auth();
	$.ajax({
		type: 'GET',
	  url: 'https://api.spotify.com/v1/me/player',
	  headers: {
	           	 Authorization: 'Bearer ' + window.access_token,
	            },
	  success: function (response, data) {
	   if ( response.is_playing == true  ) {
       		sessionStorage.setItem('playback', 'playing');
   	   } else if ( response.is_playing == false ) {
       		sessionStorage.setItem('playback', 'paused');}
   	   } 
});
if ( sessionStorage.getItem('playback') == 'playing' ) {
	if (console.logs[console.logs.length - 1] == "Paused") {
		resume();
	} else { 
      		pause();
      		sessionStorage.setItem('replay', 'paused');
	}
} else if ( sessionStorage.getItem('playback') == 'paused' ) {
      if (console.logs[console.logs.length - 1] == "Resumed") {
	      pause();
      } else {
      	resume();
      	sessionStorage.setItem('replay', 'resumed');
      }
    }
}
document.body.onkeyup = function(e){
    if(e.keyCode == 32){
       pauseplay();
    }
}
function prevTrack() {
device_get();
$.ajax({
  type: 'post',
  url: 'https://api.spotify.com/v1/me/player/previous',
  data: { device_id: window.device },
  headers: {
  'Authorization': ' Bearer ' + window.access_token
  },
  success: function (response, data) {
	console.log(data)
  }
});
}
function nextTrack() {
device_get();
$.ajax({
  type: 'post',
  url: 'https://api.spotify.com/v1/me/player/next',
  data: { device_id: window.device },
  headers: {
  'Authorization': ' Bearer ' + window.access_token
  },
  success: function (response, data) {
	console.log(data)
  }
});
}
function shuffle() {
auth();
$.ajax({
	type: 'GET',
  url: 'https://api.spotify.com/v1/me/player',
  headers: {
           	 Authorization: 'Bearer ' + window.access_token,
            },
  success: function (response, data) {
    if ( response.shuffle_state == true ) {
		 $.ajax({
			type: 'PUT',
    		url: 'https://api.spotify.com/v1/me/player/shuffle?state=false',
  			headers: {
           	 Authorization: 'Bearer ' + window.access_token,
            },
  			success: function (response, data) {
				console.log(data);
  			},
			error: function (error) {
        		console.log(error);
    		}
  		})
	} else if ( response.shuffle_state == false ) {
		  $.ajax({
			type: 'PUT',
    		url: 'https://api.spotify.com/v1/me/player/shuffle?state=true',
  			headers: {
           	 	Authorization: 'Bearer ' + window.access_token,
    		},
  			success: function (response, data) {
				console.log(data);
  			},
			error: function (error) {
        		console.log(error);
			}
		});}}
});}
auth();
$.ajax({
	type: 'GET',
  url: 'https://api.spotify.com/v1/me/player',
  headers: {
           	 Authorization: 'Bearer ' + window.access_token,
            },
  success: function (response, data) {
	if ( response != "" && response != undefined && response.item.id != "" && response.item.id != undefined ) {
    		sessionStorage.setItem('uri', response.item.id);
	}
  }
})
$.ajax({
		type: 'GET',
	  url: 'https://api.spotify.com/v1/me/player',
	  headers: {
	           	 Authorization: 'Bearer ' + window.access_token,
	            },
	  success: function (response, data) {
	   if ( response != undefined && response != "" && response.repeat_state == "context" ) {
       		document.getElementById("track").classList.add("context_loop");
                document.getElementById("loop").style.color = "darkorchid";
   	   } else if ( response != undefined && response != "" && response.repeat_state == "track") {
       		document.getElementById("track").classList.add("fa-circle");
          	document.getElementById("track").classList.remove("context_loop");
         	document.getElementById("loop").style.color = "darkorchid";
          } else if ( response != undefined && response != "" && response.repeat_state != "" && response.repeat_state != undefined && response.repeat_state) {
	  	document.getElementById("loop").style.color = "darkorchid";
	  } /* During my test I noticed that sometimes the player would understand the value, the above should work as a catch all unless repeat is not enabled
	  	I also added a request to the setInterval func, that should fix any issues caussed by a lack of device*/
   	} 
});
function loop() {
$.ajax({
	type: 'PUT',
  url: 'https://api.spotify.com/v1/me/player/repeat?state=track',
  headers: {
	           	 Authorization: 'Bearer ' + window.access_token,
	},
  success: function (response, data) {
    console.log("Track loop enabled");
  }
})
}
function reloop(){
	$.ajax({
	type: 'PUT',
  url: 'https://api.spotify.com/v1/me/player/repeat?state=context',
  headers: {
	           	 Authorization: 'Bearer ' + window.access_token,
	},
  success: function (response, data) {
    console.log("Context loop enabled");
  }
})
}
function unloop() {
	$.ajax({
	type: 'PUT',
  url: 'https://api.spotify.com/v1/me/player/repeat?state=off',
  headers: {
	           	 Authorization: 'Bearer ' + window.access_token,
	},
  success: function (response, data) {
    console.log("Loop disabled");
  }
})
}

function repeat(){
document.getElementById("loop").style.color = "darkorchid";

if ( document.getElementById("track").classList.value.includes("fa-circle") != true && document.getElementById("track").classList.value.includes("context_loop") == false ) {
      document.getElementById("track").classList.add("fa-circle");
      loop(); /* enable single track repeat */
} else if ( document.getElementById("track").classList.value.includes("fa-circle") == true ) {
      document.getElementById("track").classList.remove("fa-circle");
      document.getElementById("track").classList.add("context_loop");
      reloop(); /* enable context loop */
} else if ( document.getElementById("track").classList.value.includes("context_loop") == true ) {
			document.getElementById("track").classList.remove("fa-circle");
			document.getElementById("track").classList.remove("context_loop");
      document.getElementById("loop").style.color = "";
      unloop(); /* disable loop */
}
}
uri = sessionStorage.getItem('uri');
device_get();
	
setInterval(function() {
device_get();
$.ajax({
  type: 'POST',
  url: 'https://accounts.spotify.com/api/token',
  contentType: 'application/x-www-form-urlencoded',
  data: { 'client_id': sessionStorage.getItem('CLID'), 'client_secret': sessionStorage.getItem('CLSEC'), 'grant_type': 'refresh_token', 'refresh_token': window.refresh_token },
  success: function (response, data) {
	sessionStorage.setItem('access_token', response.access_token);
  }
});
window.access_token = sessionStorage.getItem('access_token');
uri = sessionStorage.getItem('uri');
$.ajax({
	type: 'GET',
  url: 'https://api.spotify.com/v1/me/player',
  headers: {
           	 Authorization: 'Bearer ' + window.access_token,
  },
  success: function (response, data) {
    if ( sessionStorage.getItem('device') != undefined && response != "" && response != undefined && response.shuffle_state == true ) {
		if ( document.getElementById("shuffle").style.color != "darkorchid" ) {
			document.getElementById("shuffle").style.color = "darkorchid" 
		}
    } else if ( sessionStorage.getItem('device') != undefined && response != "" && response != undefined && response.shuffle_state == false ) {
	    	document.getElementById("shuffle").style.color = ""
    } else if ( sessionStorage.getItem('device') == "null" || sessionStorage.getItem('device') == 'not found' || sessionStorage.getItem('device') === null) {
	    swal({
		    icon: "error",
		    title: "Whoops!",
		    text: "No device was found, please turn one on!",
	    });
	    sessionStorage.setItem('device', 'not found');
    }
  }
})
$.ajax({
	type: 'GET',
  url: 'https://api.spotify.com/v1/me/player',
  headers: {
           	 Authorization: 'Bearer ' + window.access_token,
  },
  success: function (response, data) {
   if ( response != "" && response != undefined && response.is_playing == true ) {
	document.getElementById("playbutton").classList = "fa fa-pause-circle fa-5x";
   } else {
	document.getElementById("playbutton").classList = "fa fa-play-circle fa-5x";
   } 
  }
})
$.ajax({
	type: 'GET',
  url: 'https://api.spotify.com/v1/me/player',
  headers: {
  'Accept': 'application/json',
  'Content-Type': 'application/json',
  'Authorization': ' Bearer ' + window.access_token
  },
  success: function (response, data) {
  	if ( response != undefined && response.is_playing != false && response.is_playing != undefined){
       sessionStorage.setItem('playing', true);
  	} else {
       sessionStorage.setItem('playing', false);
    }
  }
});
$.ajax({
	type: 'GET',
  url: 'https://api.spotify.com/v1/me/player',
  headers: {
           	 Authorization: 'Bearer ' + window.access_token,
            },
  success: function (response, data) {
	if (sessionStorage.getItem('device') != 'not found' && response != "" && response != undefined  && response.item.id != "" && response.item.id != undefined && response.item != undefined && response != undefined && response != "") {
   	 sessionStorage.setItem('uri', response.item.id);
	}
  }
})
uri = sessionStorage.getItem('uri');
if ( uri != undefined && uri != "" && sessionStorage.getItem('uri') != undefined && sessionStorage.getItem('uri') != "" ) {
$.ajax({
	type: 'GET',
 	url: 'https://api.spotify.com/v1/tracks/' + uri,
  	headers: {
           	 Authorization: 'Bearer ' + window.access_token,
        },
  success: function (response, data) {
    if ( response != undefined && response != "" && response.album.images[0].url != "" && response.album.images[0].url != undefined ) {
      document.getElementById("track-art").style.backgroundImage = '';
      document.getElementById("track-art").style.backgroundImage = 'URL("' + response.album.images[0].url + '")';
    } else {
	swal({
		title: "Whao", 
		text: "The response from the server was not defined!", 
		icon: "error",
		buttons: true,
		dangerMode: true,
	}).then((value) => {
		if (`${value}` == "true") {
			resume();
		} else {console.error('Resume was refussed, you should reload the page, as it is broken now... Addtionally remeber to start playback')}
	})
    }
  }
})
}
$.ajax({
  type: 'GET',
  url: 'https://api.spotify.com/v1/me/player',
  headers: {
  'Accept': 'application/json',
  'Content-Type': 'application/json',
  'Authorization': ' Bearer ' + access_token
  },
  success: function (response, data) {
  	if ( parseInt(document.querySelector('input[type=range]').value, 10) == 1 || parseInt(document.querySelector('input[type=range]').value, 10) >= 90) {
		document.querySelector('input[type=range]').value = Math.floor((response.progress_ms * 100) / response.item.duration_ms);
    	} else if ( ((response.progress_ms * 100) / response.item.duration_ms) - parseInt(document.querySelector('input[type=range]').value, 10) >= 0.5 || ((response.progress_ms * 100) / response.item.duration_ms) - parseInt(document.querySelector('input[type=range]').value, 10) < document.querySelector('input[type=range]').value ) {
    		document.querySelector('input[type=range]').value = Math.floor((response.progress_ms * 100) / response.item.duration_ms);
  	}
  }
})
$.ajax({
	type: 'GET',
  url: 'https://api.spotify.com/v1/me/player',
  headers: {
           	 Authorization: 'Bearer ' + window.access_token,
            },
  success: function (response, data) {
  if (response != "" && response != undefined && response.item.id != "" && response.item.id != undefined ){
  $.ajax({
    	type: 'GET',
  	url: 'https://api.spotify.com/v1/tracks/' + response.item.id,
      	headers: {
           	 Authorization: 'Bearer ' + window.access_token,
        },
  	success: function (response, data) {
		if ( response != undefined && response != "" && response.duration_ms != "" && response.duration_ms != undefined) {
    			sessionStorage.setItem('durr', response.duration_ms);
    			document.getElementById("durr").innerHTML = millisToMinutesAndSeconds(response.duration_ms);
		} else { document.getElementById("durr").innerHTML = 'Unset'; }
    	}
    })}
   }
})
$.ajax({
  type: 'GET',
  url: 'https://api.spotify.com/v1/me/player',
  headers: {
  'Accept': 'application/json',
  'Content-Type': 'application/json',
  'Authorization': ' Bearer ' + window.access_token
  },
  success: function (response, data) {
	if ( response != undefined && response != "" && response.item.name != "" && response.item.name != undefined && response.item.name != "" ) {
		if ( document.getElementById("track-name").innerHTML != response.item.name ) {
			document.getElementById("track-name").innerHTML = response.item.name 
		}
	}
  }
})
$.ajax({
	type: 'GET',
  	url: 'https://api.spotify.com/v1/me/player',
  	headers: {
  		'Accept': 'application/json',
  		'Content-Type': 'application/json',
  		'Authorization': ' Bearer ' + window.access_token
  	},
  	success: function (response, data) {
		if ( response != undefined && response != "" && response.item.artists[0].name != "" && response.item.artists[0].name != undefined ) {
			if ( document.getElementById("track-artist").innerHTML != response.item.artists[0].name ) {
				document.getElementById("track-artist").innerHTML = response.item.artists[0].name
			}
		}
  	}
});
$.ajax({
	  type: 'GET',
	  url: 'https://api.spotify.com/v1/me/player',
	  headers: {
	           	 Authorization: 'Bearer ' + window.access_token,
	            },
	  success: function (response, data) {
	   if ( response != undefined && response != "" && response.repeat_state == "context" ) {
       		document.getElementById("track").classList.add("context_loop");
                document.getElementById("loop").style.color = "darkorchid";
   	   } else if ( response != undefined && response != "" && response.repeat_state == "track") {
       		document.getElementById("track").classList.add("fa-circle");
          	document.getElementById("track").classList.remove("context_loop");
         	document.getElementById("loop").style.color = "darkorchid";
          } else if ( response != undefined && response != "" && response.repeat_state != "" && response.repeat_state != undefined && response.repeat_state) {
	  	document.getElementById("loop").style.color = "darkorchid";
	  }
	 }
});
}, 3000);
// if ( document.getElementById("track-art").style.backgroundImage == "" && )
</script>
